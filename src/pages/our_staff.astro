---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section'
import PageHeading from '../components/PageHeading'
import H2 from '../components/H2.jsx'
import H2SubHeading from '../components/H2SubHeading'
import AdminStaffCard from '../components/AdminStaffCard';
import StaffCard from '../components/StaffCard';
import {FilterIcon} from '../components/Icons';


import { query } from '../lib/mma-db.js';
import StaffCardSubjectPill from '../components/StaffCardSubjectPill';


let staffMembers = [];
    try {
      staffMembers = await query('SELECT * FROM staff'); 
    } catch (error) {
      console.error('Failed to fetch users:', error);
    }

---

<Layout title='Mind Muscles | The page was not found.'>
    <Section>
            <div class="mx-auto max-w-screen-xl px-4 md:px-8">
              <!-- text - start -->
              <PageHeading>
                <H2 heading="Meet our Tutors"/>
                <H2SubHeading subheading="This is a section of some simple filler text, also known as placeholder text. It shares some characteristics of a real written text but is random or otherwise generated."/>
              </PageHeading>
              <!-- text - end -->
              <div class="flex flex-row">
                <button class="m-4 p-4 rounded-md bg-green-600 text-white">Filter <FilterIcon/></button>
              </div>
              <!-- <div class="flex flex-row">
                <button class="m-4 p-4 rounded-md bg-green-600 text-white">Name</button>
                <button class="m-4 p-4 rounded-md bg-green-600 text-white">Subject</button>
                <button class="m-4 p-4 rounded-md bg-green-600 text-white">Level</button>
              </div> -->
              <div class="flex flex-row flex-wrap">
                <AdminStaffCard/>
              </div>
              <div class="flex flex-row flex-wrap">
                {staffMembers.map((staff) => (
                  <StaffCard 
                    firstName={staff.first_name}
                    lastName={staff.last_name} 
                    avatar={staff.avatar_path} 
                  >
                    <StaffCardSubjectPill subject="Accounting"/>
                    <StaffCardSubjectPill subject="Mathematics"/>
                    <StaffCardSubjectPill subject="Psychology"/>
                  </StaffCard>
                ))}
              </div>
              
            </div>
    </Section>
</Layout>

<!-- ALTER TABLE staff ADD COLUMN ID INT AUTO_INCREMENT PRIMARY KEY, ADD COLUMN hobbies TEXT; -->